<!-- This gets the graphs all working, and with dynamic values for the costs rather than hardcoded values like 400 or 200 -->
<!-- it does use the trick of lots of unnecessary equations though -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Scaling carbon removal</title>
    <link rel="stylesheet" href="tufte.css"/>
    <!-- <link rel="stylesheet" href="latex.css"/> -->
    <link rel="stylesheet" href="curvenote.css">
    <link rel="stylesheet" href="custom.css">

    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
    <script async src="https://unpkg.com/@curvenote/article"></script>
    <!-- <script async src="https://unpkg.com/@curvenote/svg"></script> -->


    <script type="text/javascript" src="helpers.js"></script>
    <script type="text/javascript" src="elements.js"></script>
    <script type="text/javascript" src="sidenote.js"></script>


  </head>

  <body>    

    <div class="wrapper">

    <article>
      
        <!--------------------------- ----------------- -------------------------->
        <!--------------------------- SCALE OF CAPACITY -------------------------->
        <!--------------------------- ----------------- -------------------------->
        <r-var name="yearsToScaleUp" value="30" format=",.10"></r-var>   

        <r-var name="a_costPerTon" value="50" format=",.10"></r-var>   
        <r-var name="a_learningRate" value="0" format=",.10"></r-var>   
        <r-var name="a_scaleCap" value="4" format=",.10"></r-var>  <!-- This is in gigatons  -->
        <r-var name="a_currentTonsRemoval" value="1000000000" format=",.10"></r-var>  <!-- This is in tons  -->
        <r-var name="a_currentCumulativeTonsRemoval" value="10000000000" format=",.10"></r-var> <!-- need this for cost curve placement/for tech a doesn't really matter as LR=0 -->
        <r-var name="a_yearsToScaleUp_1" :value="yearsToScaleUp" format=",.10"></r-var> 
        <r-var name="a_neededAnnualGrowthRate" :value="((((a_scaleCap*1000000000)/a_currentTonsRemoval)**(1/a_yearsToScaleUp_1))-1)*100" format=".3"></r-var> 

        <r-var name="a_C1" :value="a_costPerTon" format=",.6"></r-var>
        <r-var name="a_log2b" :value="Math.log2(1-(a_learningRate/100))" format=",.6"></r-var>

        <r-var name="b_costPerTon" value="500" format=",.10"></r-var>   
        <r-var name="b_learningRate" value="15" format=",.10"></r-var>   
        <r-var name="b_scaleCap" value="4" format=",.10"></r-var>  <!-- This is in gigatons  -->
        <r-var name="b_currentTonsRemoval" value="10000" format=",.10"></r-var>  <!-- This is in tons  -->
        <r-var name="b_currentCumulativeTonsRemoval" value="50000" format=",.10"></r-var> <!-- need this for cost curve placement/for tech a doesn't really matter as LR=0 -->
        <r-var name="b_yearsToScaleUp_1" :value="yearsToScaleUp" format=",.10"></r-var> 
        <r-var name="b_neededAnnualGrowthRate" :value="((((b_scaleCap*1000000000)/b_currentTonsRemoval)**(1/b_yearsToScaleUp_1))-1)*100" format=".3"></r-var> 

        <r-var name="b_C1" :value="b_costPerTon /b_currentCumulativeTonsRemoval ** Math.log2(1-(b_learningRate/100))" format=",.6"></r-var>
        <r-var name="b_log2b" :value="Math.log2(1-(b_learningRate/100))" format=",.6"></r-var>

        <!-- :listen="a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b" -->

        <r-var name="year" value="20" format=",.3"></r-var>

        <r-var name="thing" :value="(a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**year) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(year+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**year))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000" format=",.6"></r-var>


        <section>

        <h1 id="title">Scaling up carbon removal</h1>


        <h3 id="capacity">Portfolio allocation</h3>
        <p>
          annual growth rate:  <r-display class="b_neededAnnualGrowthRate" onmouseover="hoverByClass('a_neededAnnualGrowthRate','#E4FFED')" 
          bind="b_neededAnnualGrowthRate" onclick="sidebar('yearsTo10Gt')"></r-display>
            <!-- This model is meant to show the effects of how we chose to spend money today. Does it matter if we spend all our money on 
            the cheapest option today waiting until that can't scale anymore before focusing on other solutions. Or, will it help/be 
            necessary to start spending <b>now</b> in order to give us a reasonable chance of getting various solutions to useful 
            scales? -->
            <br><br>
            <b>Technology A</b> has a low cost per ton for removal (
            $<r-dynamic class="a_costPerTon" onmouseover="hoverByClass('a_costPerTon','#E4FFED')" 
            bind="a_costPerTon"  min="0" max="100" step="10"></r-dynamic> 
            ), but also has a learning rate of <b>0</b>, i.e it won't be getting any cheaper than this as we scale it up. We are 
            currently removing
            <r-dynamic class="a_currentTonsRemoval" onmouseover="hoverByClass('a_currentTonsRemoval','#E4FFED')" 
            bind="a_currentTonsRemoval"  min="0" max="4000000000" step="1000"></r-dynamic> tons a year with this method but it has a 
            cap it can scale to of 
            <r-dynamic class="a_scaleCap" onmouseover="hoverByClass('a_scaleCap','#E4FFED')" 
            bind="a_scaleCap"  min="0" max="10" step="1"></r-dynamic> gigatons. 

            <br><br>
            <!-- <b>Technology B</b> has a high cost per ton for removal (
            $<r-dynamic class="b_costPerTon" onmouseover="hoverByClass('b_costPerTon','#E4FFED')" 
            bind="b_costPerTon"  min="0" max="700" step="10"></r-dynamic> 
            ), but it has a learning rate of 
            <r-dynamic class="b_learningRate" onmouseover="hoverByClass('b_learningRate','#E4FFED')" 
            bind="b_learningRate"  min="0" max="100" step="1"></r-dynamic>%. 
            We are currently removing
            <r-dynamic class="b_currentTonsRemoval" onmouseover="hoverByClass('b_currentTonsRemoval','#E4FFED')" 
            bind="b_currentTonsRemoval"  min="0" max="100000000" step="1000"></r-dynamic> tons a year with this technology and it 
            has a cap it can scale to of 
            <r-dynamic class="b_scaleCap" onmouseover="hoverByClass('b_scaleCap','#E4FFED')" 
            bind="b_scaleCap"  min="0" max="10" step="1"></r-dynamic> 
            gigatons. To allow us to place ourselves on the cost curve we will also 
            assume that technology B has cumulativly removed 
            <r-dynamic class="b_currentCumulativeTonsRemoval" onmouseover="hoverByClass('b_currentCumulativeTonsRemoval','#E4FFED')" 
            bind="b_currentCumulativeTonsRemoval"  min="0" max="10000000" step="1000"></r-dynamic> tons
            of CO₂ so far in its history.  -->

            <p>
              Scenario 1 Amount of CO₂ removal (Mt)
              <r-svg-chart  ylabel="" :xlim="[0,30]" :ylim="[0, 8000]"  width="700" height="200"  y-axis-location="10" >  
                <r-svg-eqn eqn="(b_currentTonsRemoval*(1+(b_neededAnnualGrowthRate/100))**x)/1000000" :listen="b_currentTonsRemoval,b_neededAnnualGrowthRate" stroke="#2ca02c"></r-svg-eqn>
                <r-svg-eqn eqn="(a_currentTonsRemoval*(1+(a_neededAnnualGrowthRate/100))**x)/1000000" :listen="a_currentTonsRemoval,a_neededAnnualGrowthRate" stroke="#2ca02c"></r-svg-eqn>
           
                <r-svg-eqn eqn="((b_currentTonsRemoval*(1+(b_neededAnnualGrowthRate/100))**x)+(a_currentTonsRemoval*(1+(a_neededAnnualGrowthRate/100))**x))/1000000" :listen="b_currentTonsRemoval,b_neededAnnualGrowthRate,a_currentTonsRemoval,a_neededAnnualGrowthRate" stroke="#2ca02c" stroke-dasharray="3"></r-svg-eqn>
              </r-svg-chart>

            </p>

            <p>
              Scenario 1 Cost of CO₂ removal (bn)
              <r-svg-chart  ylabel="" :xlim="[0,30]" :ylim="[0, 400]"  width="700" height="200"  y-axis-location="10" >
                <r-svg-eqn eqn="((b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000" :listen="b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b" stroke="#2ca02c" ></r-svg-eqn>
                <r-svg-eqn eqn="(a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x))/1000000000" :listen="a_C1,a_currentTonsRemoval,a_neededAnnualGrowthRate" stroke="#2ca02c"></r-svg-eqn>
                <r-svg-eqn eqn="(a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000" :listen="a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b" stroke="#2ca02c" stroke-dasharray="3"></r-svg-eqn>                

                <r-svg-eqn eqn="(0)" :listen="a_C1" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_C1" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_neededAnnualGrowthRate" stroke="#2ca02c"></r-svg-eqn> 

            </r-svg-chart>

            </p>

            <p>
              Scenario 2 Amount of CO₂ removal (Mt)
              <r-svg-chart  ylabel="" :xlim="[0,30]" :ylim="[0, 8000]"  width="700" height="300"  y-axis-location="10" >  
                <r-svg-eqn eqn="Math.min((((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/a_C1)/1000000),(a_scaleCap*1000))" :listen="a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b" stroke="#2ca02c"></r-svg-eqn>
                <r-svg-eqn eqn="((Math.max((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))-(a_scaleCap*1000000000*a_C1),0))/(b_C1/(b_log2b+1)) + (b_currentCumulativeTonsRemoval)**(b_log2b+1) )**(1/(b_log2b+1))/1000000" :listen="a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b" stroke="#2ca02c"></r-svg-eqn>               
                <r-svg-eqn eqn="Math.min((((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/a_C1)/1000000),(a_scaleCap*1000))+ ((Math.max((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))-200000000000,0))/(b_C1/(b_log2b+1)) + (b_currentCumulativeTonsRemoval)**(b_log2b+1) )**(1/(b_log2b+1))/1000000" :listen="a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b" stroke="#2ca02c" stroke-dasharray="3"></r-svg-eqn>               

                <r-svg-eqn eqn="(0)" :listen="a_C1" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="a_scaleCap" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="a_currentTonsRemoval" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="a_neededAnnualGrowthRate" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_C1" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_neededAnnualGrowthRate" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_log2b" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_currentTonsRemoval" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_currentCumulativeTonsRemoval" stroke="#2ca02c"></r-svg-eqn> 

              </r-svg-chart>

            </p> 

            <p>
              Scenario 2 Cost of CO₂ removal (bn)
              <r-svg-chart  ylabel="" :xlim="[0,30]" :ylim="[0, 400]"  width="700" height="300"  y-axis-location="10" >
                <r-svg-eqn eqn="Math.min((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000,(a_C1*a_scaleCap))" :listen="a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b" stroke="#2ca02c"></r-svg-eqn>
                <r-svg-eqn eqn="Math.max(((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000)-(a_C1*a_scaleCap),0)" :listen="a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b" stroke="#2ca02c"></r-svg-eqn>
                <r-svg-eqn eqn="(a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000" :listen="a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b" stroke="#2ca02c" stroke-dasharray="3"></r-svg-eqn>               
                
                <r-svg-eqn eqn="(0)" :listen="a_C1" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="a_scaleCap" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="a_currentTonsRemoval" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="a_neededAnnualGrowthRate" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_C1" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_neededAnnualGrowthRate" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_log2b" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_currentTonsRemoval" stroke="#2ca02c"></r-svg-eqn> 
                <r-svg-eqn eqn="(0)" :listen="b_currentCumulativeTonsRemoval" stroke="#2ca02c"></r-svg-eqn> 

            </r-svg-chart>

            </p> 



          
        
      
      </section>
    </article>

    <!-- ##################### sidebar #####################-->
    <div class="sidebar">
      <div >
        <!-- <a href="#top"><p>Scaling carbon removal</p></a> -->
        <a href="#scale_of_problem" class="menuHeader"><div>Scale of problem</div></a>
        <a href="#emissions" ><div>&nbsp;&nbsp;&nbsp;Scale of emissions</div></a>
       

      </div>
    </div>
    
  </div>  <!-- end of wrapper div -->
  </body>
</html>
