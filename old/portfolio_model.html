<!-- This gets the graphs all working, and with dynamic values for the costs rather than hardcoded values like 400 or 200 -->
<!-- it does use the trick of lots of unnecessary equations though -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Scaling carbon removal</title>
    <link rel="stylesheet" href="tufte.css"/>
    <!-- <link rel="stylesheet" href="latex.css"/> -->
    <link rel="stylesheet" href="curvenote.css">
    <link rel="stylesheet" href="custom.css">

    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
    <script async src="https://unpkg.com/@curvenote/article"></script>
    <!-- <script async src="https://unpkg.com/@curvenote/svg"></script> -->


    <script type="text/javascript" src="helpers.js"></script>
    <script type="text/javascript" src="elements.js"></script>
    <script type="text/javascript" src="sidenote.js"></script>


  </head>

  <body>    

    <div class="wrapper">

    <article>
      
        <!-------------------- -------------------------- -------------------------->
        <!-------------------- PORTFOLIO ALLOCATION MODEL ------------------------>
        <!-------------------- -------------------------- -------------------------->
        <r-var name="yearsToScaleUp" value="30" format=",.10"></r-var>   

        <r-var name="a_costPerTon" value="30" format=",.10"></r-var>   
        <r-var name="a_learningRate" value="0" format=",.10"></r-var>   
        <r-var name="a_scaleCap" value="4" format=",.10"></r-var>  <!-- This is in gigatons  -->
        <r-var name="a_currentTonsRemoval" value="1000000000" format=",.10"></r-var>  <!-- This is in tons  -->
        <r-var name="a_currentCumulativeTonsRemoval" value="10000000000" format=",.10"></r-var> <!-- need this for cost curve placement/for tech a doesn't really matter as LR=0 -->
        <r-var name="a_yearsToScaleUp_1" :value="yearsToScaleUp" format=",.10"></r-var> 
        <r-var name="a_neededAnnualGrowthRate" :value="((((a_scaleCap*1000000000)/a_currentTonsRemoval)**(1/a_yearsToScaleUp_1))-1)*100" format=".3"></r-var> 
        <r-var name="a_C1" :value="a_costPerTon" format=",.6"></r-var>
        <r-var name="a_log2b" :value="Math.log2(1-(a_learningRate/100))" format=",.6"></r-var>

        <r-var name="b_costPerTon" value="500" format=",.10"></r-var>   
        <r-var name="b_learningRate" value="15" format=",.10"></r-var>   
        <r-var name="b_scaleCap" value="4" format=",.10"></r-var>  <!-- This is in gigatons  -->
        <r-var name="b_currentTonsRemoval" value="10000" format=",.10"></r-var>  <!-- This is in tons  -->
        <r-var name="b_currentCumulativeTonsRemoval" value="50000" format=",.10"></r-var> <!-- need this for cost curve placement/for tech a doesn't really matter as LR=0 -->
        <r-var name="b_yearsToScaleUp_1" :value="yearsToScaleUp" format=",.10"></r-var> 
        <r-var name="b_neededAnnualGrowthRate" :value="((((b_scaleCap*1000000000)/b_currentTonsRemoval)**(1/b_yearsToScaleUp_1))-1)*100" format=".3"></r-var> 
        <r-var name="b_C1" :value="b_costPerTon /b_currentCumulativeTonsRemoval ** Math.log2(1-(b_learningRate/100))" format=",.6"></r-var>
        <r-var name="b_log2b" :value="Math.log2(1-(b_learningRate/100))" format=",.6"></r-var>


        <r-var name="portfolio_sliderStep" value="1" format=".0f"></r-var>
        <r-var name="year" value="15" format=".1f"></r-var>



        <section>

        <h1 id="title">Scaling up carbon removal</h1>


        <h3 id="capacity">Portfolio allocation</h3>
        <p>
            This model is meant to show the effects of how we chose to spend money today. Does it matter if we spend all our money on 
            the cheapest option today waiting until that can't scale anymore before focusing on other solutions. Or, will it help/be 
            necessary to start spending <b>now</b> in order to give us a reasonable chance of getting various solutions to useful 
            scales?
            <br><br>
            <b style="color:#f97558">Technology A</b> has a low cost per ton for removal (
            $<r-dynamic class="a_costPerTon" onmouseover="hoverByClass('a_costPerTon','#E4FFED')" 
            bind="a_costPerTon"  min="0" max="100" step="10"></r-dynamic> 
            ), but also has a learning rate of <b>0</b>, i.e it won't be getting any cheaper than this as we scale it up. We are 
            currently removing
            <r-dynamic class="a_currentTonsRemoval" onmouseover="hoverByClass('a_currentTonsRemoval','#E4FFED')" 
            bind="a_currentTonsRemoval"  min="0" max="4000000000" step="1000"></r-dynamic> tons a year with this method but it has a 
            cap it can scale to of 
            <r-dynamic class="a_scaleCap" onmouseover="hoverByClass('a_scaleCap','#E4FFED')" 
            bind="a_scaleCap"  min="0" max="10" step="1"></r-dynamic> gigatons. 

            <br><br>
            <b style="color:#f4be58">Technology B</b> has a high cost per ton for removal (
            $<r-dynamic class="b_costPerTon" onmouseover="hoverByClass('b_costPerTon','#E4FFED')" 
            bind="b_costPerTon"  min="0" max="700" step="10"></r-dynamic> 
            ), but it has a learning rate of 
            <r-dynamic class="b_learningRate" onmouseover="hoverByClass('b_learningRate','#E4FFED')" 
            bind="b_learningRate"  min="0" max="100" step="1"></r-dynamic>%. 
            We are currently removing
            <r-dynamic class="b_currentTonsRemoval" onmouseover="hoverByClass('b_currentTonsRemoval','#E4FFED')" 
            bind="b_currentTonsRemoval"  min="0" max="1000000" step="1000"></r-dynamic> tons a year with this technology and it 
            has a cap it can scale to of 
            <r-dynamic class="b_scaleCap" onmouseover="hoverByClass('b_scaleCap','#E4FFED')" 
            bind="b_scaleCap"  min="0" max="10" step="1"></r-dynamic> 
            gigatons. To allow us to place ourselves on the cost curve we will also 
            assume that technology B has cumulativly removed 
            <r-dynamic class="b_currentCumulativeTonsRemoval" onmouseover="hoverByClass('b_currentCumulativeTonsRemoval','#E4FFED')" 
            bind="b_currentCumulativeTonsRemoval"  min="0" max="10000000" step="1000"></r-dynamic> tons
            of CO₂ so far in its history. 
            <br><br>
            Scenario <r-dynamic bind="portfolio_sliderStep" min="1" max="2" step="1"></r-dynamic>:
        </p>
        <p>
            <!-- <r-svg-chart  ylabel="CO2 removal (Mt)" :xlim="[0,30]" :ylim="[0, 8000]"  width="700" height="300"  y-axis-location="origin" >  
                <r-svg-eqn eqn="myFunction(x)" :listen="[a_C1]" stroke="#f4be58"></r-svg-eqn>

            </r-svg-chart> -->


            <!-- Amount of CO₂ removal (Mt) -->
            <r-svg-chart  ylabel="CO2 removal (Mt)" :xlim="[0,30]" :ylim="[0, 8000]"  width="700" height="300"  y-axis-location="origin" >  
                <r-svg-eqn eqn="portfolio_sliderStep == 1? (a_currentTonsRemoval*(1+(a_neededAnnualGrowthRate/100))**x)/1000000 : 0" :listen="[sliderStep,a_currentTonsRemoval,a_neededAnnualGrowthRate]" stroke="#f97558"></r-svg-eqn>
                <r-svg-eqn eqn="portfolio_sliderStep == 1? (b_currentTonsRemoval*(1+(b_neededAnnualGrowthRate/100))**x)/1000000 : 0" :listen="[sliderStep,b_currentTonsRemoval,b_neededAnnualGrowthRate]" stroke="#f4be58"></r-svg-eqn>
                <r-svg-eqn eqn="portfolio_sliderStep == 1? ((b_currentTonsRemoval*(1+(b_neededAnnualGrowthRate/100))**x)+(a_currentTonsRemoval*(1+(a_neededAnnualGrowthRate/100))**x))/1000000 : 0" :listen="[portfolio_sliderStep,b_currentTonsRemoval,b_neededAnnualGrowthRate,a_currentTonsRemoval,a_neededAnnualGrowthRate]" stroke="#000000" stroke-dasharray="3"></r-svg-eqn>

                <r-svg-eqn eqn="portfolio_sliderStep == 2? Math.min((((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/a_C1)/1000000),(a_scaleCap*1000)) : 0" :listen="[portfolio_sliderStep,a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b]" stroke="#f97558"></r-svg-eqn>
                <r-svg-eqn eqn="portfolio_sliderStep == 2? ((Math.max((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))-(a_scaleCap*1000000000*a_C1),0))/(b_C1/(b_log2b+1)) + (b_currentCumulativeTonsRemoval)**(b_log2b+1) )**(1/(b_log2b+1))/1000000 : 0" :listen="[portfolio_sliderStep,a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b]" stroke="#f4be58"></r-svg-eqn>               
                <r-svg-eqn eqn="portfolio_sliderStep == 2? (Math.min((((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/a_C1)/1000000),(a_scaleCap*1000)) + ((Math.max((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))-(a_scaleCap*1000000000*a_C1),0))/(b_C1/(b_log2b+1)) + (b_currentCumulativeTonsRemoval)**(b_log2b+1) )**(1/(b_log2b+1))/1000000) : 0" :listen="[portfolio_sliderStep,a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b]" stroke="#000000" stroke-dasharray="3"></r-svg-eqn>

                <!-- <r-svg-path :data="[[year, 0],[year, 8000]]" stroke="#333" stroke-width="1" stroke-dasharray="3"></r-svg-path>
                <r-svg-node :x="year" :y="4000" :drag="{year: x}" fill="#ff7f0e"></r-svg-node>
                <r-svg-text :x="year > 26? year-2.4 : year+0.4" :y="4400" text="Year:"></r-svg-text>
                <r-svg-text :x="year > 26? year-0.8 : year+2" :y="4400" :text="(year).toPrecision(2)" ></r-svg-text> -->

            </r-svg-chart>

            <r-svg-chart  ylabel="Cost ($bn)" :xlim="[0,30]" :ylim="[0, 400]"  width="700" height="300"  y-axis-location="10" >
                <r-svg-eqn eqn="portfolio_sliderStep == 1? (a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x))/1000000000 : 0" :listen="[portfolio_sliderStep,a_C1,a_currentTonsRemoval,a_neededAnnualGrowthRate]" stroke="#f97558"></r-svg-eqn>
                <r-svg-eqn eqn="portfolio_sliderStep == 1? ((b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000 : 0" :listen="[portfolio_sliderStep,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b]" stroke="#f4be58" ></r-svg-eqn>
                <r-svg-eqn eqn="portfolio_sliderStep == 1? (a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000 : 0" :listen="[portfolio_sliderStep,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b]" stroke="#000000" stroke-dasharray="3"></r-svg-eqn>                

                <r-svg-eqn eqn="portfolio_sliderStep == 2? Math.min((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000,(a_C1*a_scaleCap)) : 0" :listen="[portfolio_sliderStep,a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b]" stroke="#f97558"></r-svg-eqn>
                <r-svg-eqn eqn="portfolio_sliderStep == 2? Math.max(((a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000)-(a_C1*a_scaleCap),0) : 0" :listen="[portfolio_sliderStep,a_scaleCap,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b]" stroke="#f4be58"></r-svg-eqn>
                <r-svg-eqn eqn="portfolio_sliderStep == 2? (a_C1*a_currentTonsRemoval*((1+(a_neededAnnualGrowthRate/100))**x) + (b_C1/(b_log2b + 1))*(((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**(x+1)))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)**(b_log2b + 1)) - (((b_currentTonsRemoval * ((1-(1+(b_neededAnnualGrowthRate/100))**x))/((1-(1+(b_neededAnnualGrowthRate/100)))) - b_currentTonsRemoval + b_currentCumulativeTonsRemoval)-1)**(b_log2b + 1)) ))/1000000000 : 0" :listen="[portfolio_sliderStep,a_currentTonsRemoval,a_currentCumulativeTonsRemoval,a_neededAnnualGrowthRate,a_C1,a_log2b,b_currentTonsRemoval,b_currentCumulativeTonsRemoval,b_neededAnnualGrowthRate,b_C1,b_log2b]" stroke="#000000" stroke-dasharray="3"></r-svg-eqn>               
                
                <!-- <r-svg-path :data="[[year, 0],[year, 400]]" stroke="#333" stroke-width="1" stroke-dasharray="3"></r-svg-path>
                <r-svg-node :x="year" :y="200" :drag="{year: x}" fill="#ff7f0e"></r-svg-node>
                <r-svg-text :x="year > 26? year-2.4 : year+0.4" :y="220" text="Year:" ></r-svg-text>
                <r-svg-text :x="year > 26? year-0.8 : year+2" :y="220" :text="(year).toPrecision(2)" ></r-svg-text> -->

            </r-svg-chart>
            The picture we see is that given a certain budget if we spend it like in scenario 2 we will not manage to fully scale up 
            Technology B by our target date. I want to emphasise that this effect is fully an allocation effect. We know if we spent 
            the money differently (scenario 1) that we could have both technologies at full capacity by this date.
            <br><br>
            Why does this effect occur? Largely it is because if we start scaling tech B up starting right now we will have cumulatively
            made many more units of it and so the unit costs will have fallen much more than if we try to scale it up very quickly. This 
            means for any given budget if we can start getting the costs down today by starting to ramp up usage we should otherwise we 
            will find ourselves in the position of having to pay a much higher average unit price for it in the future.
            <br><br>
            In the model above then what we see is that in scenario 2 we therefore often don't have enough of a budget to scale this
            technology all the way up to its full capacity. The news is actually even worse than that. Money and time are not fungible.
            To some extent we can choose to pay more to do something faster but there are limits to this. 
            <br><br>
            In scenario 2 in the model above we often don't start producing technology B until 5 or so years before the deadline. This 
            turns what is already a hefty scale up rate of … if we start today to something closer to …. a year. There comes a time when 
            this rate is simply beyond what we are likely to be able to sustain no matter how much we spend. 
            <br><br>
            There are two main reasons why we might not, for any amount, be able to buy our way out of this scale up problem. If asked 
            how you would get to the moon in the 1600's you would maybe have suggested a very large and strong balloon. In reality though
            no amount of money you could have spent back then would have got you to your objective. You needed multiple breakthroughs 
            like calculus, orbital mechanics, the theory of propulsion engines, computers, to create the vehicle needed. Similarly if 
            we wait too long to start scaling up Tech B then we deprive ourselves of the time needed to make unforeseen advances that 
            might well be needed if we are to actually get to certain massive scales.
            <br><br>
            The other reason is more practical. It might simply not be possible to repurpose existing parts of the economy fast enough 
            or on a large enough scale to reach such a large annual scale up so quickly. It would involve the retraining of millions of 
            people, the reallocation of vast sections of the chemical and other industries. These things might be only financial issues 
            in models but they exist as actual constraints in the real world. 
            <br><br>
            The outcome of all of this is that it may not just be cheaper to start aggressively scaling things like technology B today, 
            but it might be our only option if we really want to have it available for us to use in the future at the scales we will need 
            it in.
        </p>

      
      </section>
    </article>

    <!-- ##################### sidebar #####################-->
    <div class="sidebar">
      <div >
        <!-- <a href="#top"><p>Scaling carbon removal</p></a> -->
        <a href="#scale_of_problem" class="menuHeader"><div>Scale of problem</div></a>
        <a href="#emissions" ><div>&nbsp;&nbsp;&nbsp;Scale of emissions</div></a>
       

      </div>
    </div>
    
  </div>  <!-- end of wrapper div -->
  </body>
</html>
